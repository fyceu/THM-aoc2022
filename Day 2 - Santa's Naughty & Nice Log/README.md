# Day 2 - Santa's Naughty & Nice Log

> Help Elf McBlue track down the Bandit Yeti APT through the captured source files
## Objectives
- Learn what log files are and why they’re useful
- Understand what valuable information log files can contain
- Understand some common locations these logs file can be found
- Use some basic Linux commands to start analysing log files for valuable information
- Help Elf McBlue track down the Bandit Yeti APT!
## Enumeration
Credentials: 
- IP: ```10.10.103.100```
- Username: ```elfmcblue```
- Password: ```tryhackme!```

Connect to the target machine via SSH using the credentials above:

```ssh elfmcblue@10.10.103.100```
<br>
### 1. use ls command to view the present files in the working directory. How many log files are present?
Answer:

```2```

![Pasted image 20221203162911](https://user-images.githubusercontent.com/65686765/205475457-90d67077-86d9-481f-b78c-3193baed44d9.png)

### 2. Elf McSkidy managed to capture the logs generated by the web server. What is the name of this log file?
Answer:
 
 ```webserver.log``` 
<br>
## Log Analysis
We know the adversary stole Santa's naughty and nice list. So I decided to use ```grep``` to search for "Santa" within the webserver.log file

![Pasted image 20221203162736](https://user-images.githubusercontent.com/65686765/205475510-15cf6302-1740-4fb0-bab5-bd5193c0e993.png)
### 3. On what day was Santa's naughty and nice list stolen?
Answer:

```Friday```

### 4. What is the IP address of the attacker?
Answer:

```10.10.249.191```

### 5. What is the name of the important list that the attacker stole from Santa?
Answer:

```santaslist.txt```

<br>
Since the flag has a unique format consisting of THM{}, we can use the ```grep``` command to search both of the log files for the flag.

![Pasted image 20221203163026](https://user-images.githubusercontent.com/65686765/205475545-5321c479-5139-4602-85a5-f710986b0a7b.png)
### 6. Look through the log files for the flag. The format of the flag is: THM{}
Flag: 

```THM{STOLENSANTALIST}```
<br>
## Making a solve script
I needed to figure out how to create a bash script that can SSH into a remote machine without typing in a password, then execute a command on said machine. 

[sshpass](https://linux.die.net/man/1/sshpass) is a tool that allows a solution for the former, as we are able to pass the credentials in using a variable. 
```bash
#!/bin/bash

server=10.10.103.100
user=elfmcblue
pass=tryhackme!

sshpass -p $pass ssh $user@$server 'grep THM SSHD.log' | cat >> flag.txt
```
This is most likely not the best security practice but . . . oh well