# Day 2 - Santa's Naughty & Nice Log
---
> Help Elf McBlue track down the Bandit Yeti APT through the captured source files

## Objectives
- Learn what log files are and why they’re useful
- Understand what valuable information log files can contain
- Understand some common locations these logs file can be found
- Use some basic Linux commands to start analysing log files for valuable information
- Help Elf McBlue track down the Bandit Yeti APT!
## Enumeration
---
Credentials: 
- IP: ```10.10.103.100```
- Username: ```elfmcblue```
- Password: ```tryhackme!```

Connect to the target machine via SSH using the credentials above:
```ssh elfmcblue@10.10.103.100```

### use ``ls`` command to view the present files in the working directory. How many log files are present?
There are ```2``` log files: SSHD.log and webserver.log

![[Pasted image 20221203162911.png]]
### Elf McSkidy managed to capture the logs generated by the web server. What is the name of this log file?
The log files from the webserver were captured in the file ```webserver.log``` 

## Log Analysis
---
We know the adversary stole Santa's naughty and nice list. So I decided to search for Santa within the webserver.log file
![[Pasted image 20221203162736.png]]
### On what day was Santa's naughty and nice list stolen?
The list was stolen on ```
Friday```, 11/18/22

### What is the IP address of the attacker?
Their IP address is ```10.10.249.191```

### What is the name of the important list that the attacker stole from Santa?
The file was ```santaslist.txt```

Since the flag has a unique format consisting of THM{}, we can use the ```grep``` command to search both of the log files for the flag.
![[Pasted image 20221203163026.png]]

Flag: ```THM{STOLENSANTALIST}```

## Making a solve script
I needed to figure out how to create a bash script that can SSH into a remote machine without typing in a password, then execute a command on said machine. `sshpass` is a tool that allows a solution for the former, as we are able to pass the credentials in using a variable. 
```bash
#!/bin/bash

server=10.10.103.100
user=elfmcblue
pass=tryhackme!

sshpass -p $pass ssh $user@$server 'grep THM SSHD.log' | cat >> flag.txt
```
This is most likely not the best security practice but... oh well